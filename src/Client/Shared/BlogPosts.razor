@using BlazorBlog.Shared
@using BlazorBlog.Client.Services
@inject IBlogService BlogService

@if (Posts is not null)
{
	@foreach (var post in Posts)
	{
		<div class="card my-4">
			<div class="card-img" style="background-image: url('@(post.Image ?? _placeholderImage)');"></div>
			<div class="card-body">
				<h5 class="card-title">@post.Title</h5>
				<p class="card-text">@post.Description</p>
				<p class="card-text">
					<small class="text-muted">@post.Created.ToLongDateString()</small>
				</p>
				<a href="/posts/@post.Url" class="btn btn-primary">Read more...</a>
			</div>
		</div>
	}
}
else
{
	<p>Loading...</p>
}

@code {
	private List<BlogPost>? Posts { get; set; } = new();

	string _placeholderImage = "https://via.placeholder.com/1060x180";

	protected override async Task OnInitializedAsync()
	{
		Posts = await BlogService.GetBlogPosts();
	}

}