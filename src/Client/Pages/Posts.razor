@page "/posts/{url}"
@using BlazorBlog.Shared
@using Markdig
@using BlazorBlog.Client.Services
@inject IBlogService BlogService

@if (_post is not null)
{
	<div class="post-img" style="background-image: url('@(_post.Image ?? _placeholderImage)');"></div>
	<h3>@_post!.Title</h3>
	<div>@((MarkupString)Markdown.ToHtml(_post.Content))</div>
}
else
{
	<p>Loading...</p>
}

@code {
	private BlogPost? _post;
	readonly string _placeholderImage = "https://via.placeholder.com/1060x300";

	[Parameter]
	public string? Url { get; set; }

	protected override async Task OnInitializedAsync()
	{
		_post = await BlogService.GetBlogPostByUrl(Url ?? throw new InvalidOperationException());
	}

}